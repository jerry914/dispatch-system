{"version":3,"sources":["webpack:///./src/views/counselors/listCounselor.vue","webpack:///./src/views/counselors/listCounselor.vue?f49a","webpack:///./node_modules/core-js/modules/es.array.filter.js","webpack:///./node_modules/core-js/internals/array-fill.js","webpack:///./node_modules/core-js/modules/es.array.fill.js","webpack:///./src/views/counselors/listCounselor.vue?e014"],"names":["class","_createElementVNode","value","_createTextVNode","style","key","_createElementBlock","_hoisted_2","$data","$event","_hoisted_3","_Fragment","_renderList","option","label","_hoisted_4","_createVNode","_component_el_row","gutter","default","_component_el_col","sm","md","_component_el_table","data","$options","_component_el_table_column","prop","width","header","_component_el_popover","placement","title","trigger","reference","_hoisted_6","_component_QuestionFilled","innerHTML","getHtmlContent","_hoisted_5","_","scope","_toDisplayString","row","available_time","_createBlock","id","item","consultation_day","consultation_time","name","crisis_level","_createCommentVNode","i","_normalizeStyle","length","span","days","day","times","time","justify","Number","isInteger","j","mixins","weektimeMixin","counselorNum","maxNum","semester_label","labelOption","created","$store","dispatch","state","computed","counselors","this","filter","counselor","cases","assignCases","methods","countAvailable","r","c","timeTable","Array","fill","map","forEach","split","aAry","parseInt","dayRule","timeRule","getCasesByCounselorId","e","counselor_id","sort","a","b","aDay","bDay","__exports__","render","$","$filter","arrayMethodHasSpeciesSupport","HAS_SPECIES_SUPPORT","target","proto","forced","callbackfn","arguments","undefined","toObject","toAbsoluteIndex","lengthOfArrayLike","module","exports","O","argumentsLength","index","end","endPos","addToUnscopables"],"mappings":"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","file":"js/chunk-76d76273.37cce8e3.js","sourcesContent":["<template lang=\"pug\">\n.page-container\n    .page-title 心理師班表\n    select.labelSelector(v-model='semester_label')\n        option(value='') 請選擇學期標籤\n        option(v-for='option in labelOption' :key='option.label' :value='option.label') {{ option.label }}\n    el-row(:gutter=\"20\")\n        el-col(:sm=\"24\" :md=\"12\")\n            el-table.list-container(:data=\"counselors\" style=\"width: 100%\")\n                el-table-column(prop=\"name\" label=\"姓名\" width=\"100\")\n                el-table-column(prop=\"semester_label\" label=\"學期\")\n                el-table-column(prop=\"available_time\" label=\"可諮商時段\")\n                    template(#header='')\n                        el-popover(placement=\"right\" title=\"\" :width=\"200\" trigger=\"hover\" popper-class=\"weektimePop\")\n                            div(v-html=\"getHtmlContent()\")\n                            template(#reference)\n                                span 可諮商時段\n                                    QuestionFilled(style=\"width: 1em; height: 1em; padding: 0 0 0 3px\")\n                    template(#default='scope')\n                        div {{scope.row.available_time}}\n                el-table-column(v-if=\"cases.data\" prop=\"assign_time\" label=\"目前排班狀況\")\n                    template(#default='scope')\n                        div(v-for=\"item in getCasesByCounselorId(scope.row.id)\") {{item.consultation_day}}{{item.consultation_time}}-{{item.name}} | {{item.crisis_level}}\n        el-col(:sm=\"24\" :md=\"12\")\n            div(style=\"display:flex;\")\n                div 0/{{counselorNum}}\n                div.color-box\n                    .color-box-item(v-for=\"i in maxNum+1\" :style=\"'background-color: rgba(242, 164, 75, '+(i-1)/maxNum+');width: '+100/maxNum+'%;'\")\n                div {{maxNum}}/{{counselorNum}} (有排班人數/總人數)\n            .counselor-time-table(v-if=\"countAvailable().length>1\")\n                el-row\n                    el-col.picker-col-lable.row-border(:span=\"4\")\n                    el-col.picker-col.row-border(v-for=\"day in days\" :span=\"4\") {{day.label}}\n                el-row.picker-row(v-for=\"(time,i) in times\" justify=\"space-around\" :style=\"!Number.isInteger(time.value)?'border-top: 2px solid #F2A54B':''\")\n                    el-col.picker-col-lable(:span=\"4\") {{time.label}}\n                    el-col.picker-col(v-for=\"(day,j) in days\" :span=\"4\" :style=\"'background-color: rgba(242, 164, 75, '+countAvailable()[j][i]/maxNum+')'\")\n</template>\n\n<script>\nimport {weektimeMixin} from \"@/components/weektimeMixin\"\nexport default {\n    mixins: [weektimeMixin],\n    data () {\n        return {\n            counselorNum: -1,\n            maxNum: 0,\n            semester_label: '',\n            labelOption: [],\n        }\n    },\n    async created() {\n        await this.$store.dispatch('fetchCounselors')\n        await this.$store.dispatch('fetchAssignCases')\n        await this.$store.dispatch('fetchSemesterLabel')\n        this.labelOption = this.$store.state.semester_label.data\n    },\n    computed: {\n        counselors() {\n            if (this.semester_label !== '')\n                return this.$store.state.counselors.filter(counselor => counselor.semester_label === this.semester_label)\n            else\n                return this.$store.state.counselors\n        },\n        cases() {\n            return this.$store.state.assignCases\n        }\n    },\n    methods: {\n        countAvailable() {\n            // Init\n            this.counselorNum = this.counselors.length\n            var [r, c] = [this.days.length, this.times.length]\n            var timeTable = Array(r).fill().map(()=>Array(c).fill(0))\n            this.counselors.forEach(counselor => {\n                if(counselor.available_time!=\"\") {\n                    counselor.available_time.split(',').forEach(time => {\n                        let aAry = time.split('')\n                        aAry[0] = parseInt(this.dayRule[aAry[0]])-1\n                        aAry[1] = parseInt(this.timeRule[aAry[1]])-1\n                        if(!timeTable[aAry[0]][aAry[1]]) timeTable[aAry[0]][aAry[1]]=1\n                        else timeTable[aAry[0]][aAry[1]] += 1\n\n                        if(timeTable[aAry[0]][aAry[1]]>this.maxNum) this.maxNum = timeTable[aAry[0]][aAry[1]]\n                    })\n                }\n            })\n            return timeTable\n        },\n        getCasesByCounselorId(id) {\n            let cases = this.cases.data.filter(e => e.counselor_id == id)\n            cases.sort((a,b) => {\n                let aDay = this.dayRule[a.consultation_day]\n                let bDay = this.dayRule[b.consultation_day]\n                if(aDay == bDay){\n                    return this.timeRule[a.consultation_time]-this.timeRule[b.consultation_time]\n                }\n                else{\n                    return this.dayRule[a.consultation_day]-this.dayRule[b.consultation_day]\n                }\n            })\n            return cases\n        }\n    }\n}\n</script>\n<style lang=\"sass\" scoped>\n@import \"@/style/common.sass\"\n.color-box\n    border: 1px solid $GrayBorder\n    height: 20px\n    width: 100px\n    margin: 0 10px\n    display: flex\n.color-box-item \n    height: 100%\n    background-color: $BaseBorder\n.picker-row\n    border-bottom: 1px solid $LightBorder\n    text-align: center\n    user-select: none\n.picker-col-lable\n    word-wrap: break-word\n    text-align: center\n    padding: 3px\n.picker-col\n    word-wrap: break-word\n    border-left: 1px solid $LightBorder\n    text-align: center\n    padding: 3px\n.row-border\n    border-bottom: 2px solid #F2A54B\n.counselor-time-table\n    @include tableBorder()\n    margin: 20px 0\n    background-color: #fff\n    overflow: hidden\n\n.labelSelector\n    width: 200px\n    margin-bottom: 20px\n</style>\n","import { render } from \"./listCounselor.vue?vue&type=template&id=d8ee171e&scoped=true&lang=pug\"\nimport script from \"./listCounselor.vue?vue&type=script&lang=js\"\nexport * from \"./listCounselor.vue?vue&type=script&lang=js\"\n\nimport \"./listCounselor.vue?vue&type=style&index=0&id=d8ee171e&lang=sass&scoped=true\"\n\nimport exportComponent from \"/Users/jerry/Projects/assignSystem/assignSystem/frontend/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-d8ee171e\"]])\n\nexport default __exports__","'use strict';\nvar $ = require('../internals/export');\nvar $filter = require('../internals/array-iteration').filter;\nvar arrayMethodHasSpeciesSupport = require('../internals/array-method-has-species-support');\n\nvar HAS_SPECIES_SUPPORT = arrayMethodHasSpeciesSupport('filter');\n\n// `Array.prototype.filter` method\n// https://tc39.es/ecma262/#sec-array.prototype.filter\n// with adding support of @@species\n$({ target: 'Array', proto: true, forced: !HAS_SPECIES_SUPPORT }, {\n  filter: function filter(callbackfn /* , thisArg */) {\n    return $filter(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n","'use strict';\nvar toObject = require('../internals/to-object');\nvar toAbsoluteIndex = require('../internals/to-absolute-index');\nvar lengthOfArrayLike = require('../internals/length-of-array-like');\n\n// `Array.prototype.fill` method implementation\n// https://tc39.es/ecma262/#sec-array.prototype.fill\nmodule.exports = function fill(value /* , start = 0, end = @length */) {\n  var O = toObject(this);\n  var length = lengthOfArrayLike(O);\n  var argumentsLength = arguments.length;\n  var index = toAbsoluteIndex(argumentsLength > 1 ? arguments[1] : undefined, length);\n  var end = argumentsLength > 2 ? arguments[2] : undefined;\n  var endPos = end === undefined ? length : toAbsoluteIndex(end, length);\n  while (endPos > index) O[index++] = value;\n  return O;\n};\n","var $ = require('../internals/export');\nvar fill = require('../internals/array-fill');\nvar addToUnscopables = require('../internals/add-to-unscopables');\n\n// `Array.prototype.fill` method\n// https://tc39.es/ecma262/#sec-array.prototype.fill\n$({ target: 'Array', proto: true }, {\n  fill: fill\n});\n\n// https://tc39.es/ecma262/#sec-array.prototype-@@unscopables\naddToUnscopables('fill');\n","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/sass-loader/lib/loader.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--1-1!./listCounselor.vue?vue&type=style&index=0&id=d8ee171e&lang=sass&scoped=true\""],"sourceRoot":""}