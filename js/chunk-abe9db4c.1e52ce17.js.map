{"version":3,"sources":["webpack:///./node_modules/core-js/internals/engine-ff-version.js","webpack:///./node_modules/core-js/modules/es.object.values.js","webpack:///./node_modules/core-js/internals/delete-property-or-throw.js","webpack:///./node_modules/core-js/modules/es.array.sort.js","webpack:///./node_modules/core-js/internals/engine-webkit-version.js","webpack:///./node_modules/@babel/runtime/helpers/esm/defineProperty.js","webpack:///./node_modules/@babel/runtime/helpers/esm/objectSpread2.js","webpack:///./src/views/assign/assigning.vue?7d9b","webpack:///./src/components/SemesterLabelTag.vue","webpack:///./src/components/SemesterLabelTag.vue?1e05","webpack:///./node_modules/core-js/modules/es.array.splice.js","webpack:///./node_modules/core-js/internals/array-sort.js","webpack:///./src/components/SemesterLabelTag.vue?f7a7","webpack:///./src/views/assign/assigning.vue","webpack:///./src/views/assign/assigningBlock.vue","webpack:///./src/views/assign/assigningBlock.vue?f3dc","webpack:///./src/views/assign/assigning.vue?2d9e","webpack:///./node_modules/core-js/internals/engine-is-ie-or-edge.js","webpack:///./node_modules/core-js/modules/es.object.get-own-property-descriptors.js","webpack:///./src/views/assign/assigningBlock.vue?c11e","webpack:///./node_modules/core-js/modules/es.object.get-own-property-descriptor.js"],"names":["userAgent","firefox","match","module","exports","$","$values","values","target","stat","O","tryToString","$TypeError","TypeError","P","uncurryThis","aCallable","toObject","lengthOfArrayLike","deletePropertyOrThrow","toString","fails","internalSort","arrayMethodIsStrict","FF","IE_OR_EDGE","V8","WEBKIT","test","un$Sort","sort","push","FAILS_ON_UNDEFINED","undefined","FAILS_ON_NULL","STRICT_METHOD","STABLE_SORT","code","chr","value","index","result","String","fromCharCode","k","v","a","b","length","charAt","FORCED","getSortCompare","comparefn","x","y","proto","forced","array","this","itemsLength","items","arrayLength","webkit","_defineProperty","obj","key","Object","defineProperty","enumerable","configurable","writable","ownKeys","object","enumerableOnly","keys","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","apply","_objectSpread2","i","arguments","source","forEach","getOwnPropertyDescriptors","defineProperties","_createElementBlock","class","style","$options","$props","props","label","type","required","data","labelOptions","created","$store","state","semester_label","dispatch","methods","getLabelColor","option","find","opt","color","getStyleForLabel","__exports__","render","toAbsoluteIndex","toIntegerOrInfinity","doesNotExceedSafeInteger","arraySpeciesCreate","createProperty","arrayMethodHasSpeciesSupport","HAS_SPECIES_SUPPORT","max","Math","min","splice","start","deleteCount","insertCount","actualDeleteCount","A","from","to","len","actualStart","argumentsLength","arraySlice","floor","mergeSort","middle","insertionSort","merge","element","j","left","right","llength","rlength","lindex","rindex","_createElementVNode","_createTextVNode","ref","span","slot","_hoisted_4","_hoisted_5","$data","$event","onChange","_hoisted_6","_Fragment","_renderList","_hoisted_7","_hoisted_9","_createVNode","_component_el_popover","placement","title","width","trigger","reference","_hoisted_20","_component_InfoFilled","default","_hoisted_10","_hoisted_12","_hoisted_13","_hoisted_14","_hoisted_15","_hoisted_16","_hoisted_17","_hoisted_18","_","_component_el_button","size","onClick","_hoisted_22","_createBlock","_component_el_row","gutter","_component_el_col","sm","md","onDrop","onDragover","id","_component_QuestionFilled","innerHTML","getHtmlContent","_hoisted_23","_createCommentVNode","item","idx","draggable","status","onDragstart","_normalizeClass","_hoisted_24","_toDisplayString","convertUTCtoStr","_component_SemesterLabelTag","_normalizeStyle","_hoisted_27","times","split","day","tIdx","offset","isHoliday","_component_el_tag","effect","round","_hoisted_29","rows","row","rowIdx","counselor_name","block","_component_timeBlock","pos","onAddTimeblock","onRemoveTimeblock","onSetDragPos","onEndCase","onReturnCase","_component_el_dialog","modelValue","onClose","center","_hoisted_31","_component_download_excel","fields","name","_hoisted_32","_hoisted_33","_component_el_table","_component_el_table_column","prop","header","_hoisted_35","_hoisted_34","scope","consultation_day","consultation_time","init_consultation_date","_hoisted_37","_hoisted_2","disabled","isLater","consultation_number","_hoisted_3","$emit","_hoisted_8","getColor","formatContent","caseId","getDateStr","crisis_level","discription","first_consultation_date","end_consultation_date","allowDrop","ev","preventDefault","drag","dataTransfer","setData","drop","getData","classList","contains","appendChild","document","getElementById","querySelector","datestring","today","Date","getFullYear","getMonth","getDate","clikeLaterBlock","$message","showClose","message","duration","clickEnd","parseInt","mixins","weektimeMixin","components","timeBlock","SemesterLabelTag","inject","dialogVisible","headerLabel","headerName","assignCases","unassignCases","timetable","tableWidth","dragPos","dayList","emptyTimeList","finalTimeInfo","loading","json_fields","semesterLabel","labelOption","sortRule","sortScore","labelNumber","B","C","levelNumber","time","$route","query","sort_rule","createTimeTable","console","log","computed","assigningCases","cases","counselors","counselor","mounted","parentwidth","$refs","assignTable","clientWidth","semesterLabelSelected","$router","path","reload","pushSortRule","sortCases","endDate","msInDay","count","l","indexOf","score","startDate","dis","ceil","abs","cloneDeep","weekdays","setDate","offset_date","getDay","checkHoliday","rowAry","available_time","timeAry","blockObj","t","the_time","substr","unshift","fitDay","d","checkRangeDay","_item","countConsultationNumber","removeEmptyTimeList","checkReserve","clearRepeatTime","root_node","timeInfo","fit_time","fitEmptyTimeList","remain_time","makeTree","infoIdx","shift","assingDay","assignTime","dayOffset","counselor_id","nextOffset","setTimeout","nodes","caseIdx","maxFit","_fit_time","node","list","labels","join","_ary","ary","getDatetime","date","removeTimeblock","setDragPos","val","changeCaseStatus","addTimeblock","col","e","unassignCase","putCase","body","$http","put","then","response","catch","error","submitChange","downloadXLS","convertCases","downloadCSV","formattedCases","csvContent","buildCSVContent","encodedUri","encodeURI","window","open","formatConsultationDateTime","caseItem","dayLabel","days","timeLabel","map","consultation_datetime","buildRow","handleClose","endCase","returnCase","UA","DESCRIPTORS","toIndexedObject","getOwnPropertyDescriptorModule","sham","descriptor","f","nativeGetOwnPropertyDescriptor","FAILS_ON_PRIMITIVES","it"],"mappings":"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","file":"js/chunk-abe9db4c.1e52ce17.js","sourcesContent":["var userAgent = require('../internals/engine-user-agent');\n\nvar firefox = userAgent.match(/firefox\\/(\\d+)/i);\n\nmodule.exports = !!firefox && +firefox[1];\n","var $ = require('../internals/export');\nvar $values = require('../internals/object-to-array').values;\n\n// `Object.values` method\n// https://tc39.es/ecma262/#sec-object.values\n$({ target: 'Object', stat: true }, {\n  values: function values(O) {\n    return $values(O);\n  }\n});\n","'use strict';\nvar tryToString = require('../internals/try-to-string');\n\nvar $TypeError = TypeError;\n\nmodule.exports = function (O, P) {\n  if (!delete O[P]) throw $TypeError('Cannot delete property ' + tryToString(P) + ' of ' + tryToString(O));\n};\n","'use strict';\nvar $ = require('../internals/export');\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar aCallable = require('../internals/a-callable');\nvar toObject = require('../internals/to-object');\nvar lengthOfArrayLike = require('../internals/length-of-array-like');\nvar deletePropertyOrThrow = require('../internals/delete-property-or-throw');\nvar toString = require('../internals/to-string');\nvar fails = require('../internals/fails');\nvar internalSort = require('../internals/array-sort');\nvar arrayMethodIsStrict = require('../internals/array-method-is-strict');\nvar FF = require('../internals/engine-ff-version');\nvar IE_OR_EDGE = require('../internals/engine-is-ie-or-edge');\nvar V8 = require('../internals/engine-v8-version');\nvar WEBKIT = require('../internals/engine-webkit-version');\n\nvar test = [];\nvar un$Sort = uncurryThis(test.sort);\nvar push = uncurryThis(test.push);\n\n// IE8-\nvar FAILS_ON_UNDEFINED = fails(function () {\n  test.sort(undefined);\n});\n// V8 bug\nvar FAILS_ON_NULL = fails(function () {\n  test.sort(null);\n});\n// Old WebKit\nvar STRICT_METHOD = arrayMethodIsStrict('sort');\n\nvar STABLE_SORT = !fails(function () {\n  // feature detection can be too slow, so check engines versions\n  if (V8) return V8 < 70;\n  if (FF && FF > 3) return;\n  if (IE_OR_EDGE) return true;\n  if (WEBKIT) return WEBKIT < 603;\n\n  var result = '';\n  var code, chr, value, index;\n\n  // generate an array with more 512 elements (Chakra and old V8 fails only in this case)\n  for (code = 65; code < 76; code++) {\n    chr = String.fromCharCode(code);\n\n    switch (code) {\n      case 66: case 69: case 70: case 72: value = 3; break;\n      case 68: case 71: value = 4; break;\n      default: value = 2;\n    }\n\n    for (index = 0; index < 47; index++) {\n      test.push({ k: chr + index, v: value });\n    }\n  }\n\n  test.sort(function (a, b) { return b.v - a.v; });\n\n  for (index = 0; index < test.length; index++) {\n    chr = test[index].k.charAt(0);\n    if (result.charAt(result.length - 1) !== chr) result += chr;\n  }\n\n  return result !== 'DGBEFHACIJK';\n});\n\nvar FORCED = FAILS_ON_UNDEFINED || !FAILS_ON_NULL || !STRICT_METHOD || !STABLE_SORT;\n\nvar getSortCompare = function (comparefn) {\n  return function (x, y) {\n    if (y === undefined) return -1;\n    if (x === undefined) return 1;\n    if (comparefn !== undefined) return +comparefn(x, y) || 0;\n    return toString(x) > toString(y) ? 1 : -1;\n  };\n};\n\n// `Array.prototype.sort` method\n// https://tc39.es/ecma262/#sec-array.prototype.sort\n$({ target: 'Array', proto: true, forced: FORCED }, {\n  sort: function sort(comparefn) {\n    if (comparefn !== undefined) aCallable(comparefn);\n\n    var array = toObject(this);\n\n    if (STABLE_SORT) return comparefn === undefined ? un$Sort(array) : un$Sort(array, comparefn);\n\n    var items = [];\n    var arrayLength = lengthOfArrayLike(array);\n    var itemsLength, index;\n\n    for (index = 0; index < arrayLength; index++) {\n      if (index in array) push(items, array[index]);\n    }\n\n    internalSort(items, getSortCompare(comparefn));\n\n    itemsLength = items.length;\n    index = 0;\n\n    while (index < itemsLength) array[index] = items[index++];\n    while (index < arrayLength) deletePropertyOrThrow(array, index++);\n\n    return array;\n  }\n});\n","var userAgent = require('../internals/engine-user-agent');\n\nvar webkit = userAgent.match(/AppleWebKit\\/(\\d+)\\./);\n\nmodule.exports = !!webkit && +webkit[1];\n","export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}","import defineProperty from \"./defineProperty.js\";\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    enumerableOnly && (symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    })), keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nexport default function _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = null != arguments[i] ? arguments[i] : {};\n    i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {\n      defineProperty(target, key, source[key]);\n    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {\n      Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n    });\n  }\n\n  return target;\n}","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/sass-loader/lib/loader.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--1-1!./assigning.vue?vue&type=style&index=0&id=c1db902e&lang=sass&scoped=true\"","<template>\n    <div \n      class=\"semester_label_tag\" \n      :style=\"getStyleForLabel(label)\"\n    >\n      {{ label }}\n    </div>\n  </template>\n  \n  <script>\n  export default {\n    props: {\n      label: {\n        type: String,\n        required: true\n      }\n    },\n    data() {\n      return {\n        labelOptions: []\n      }\n    },\n    async created() {\n        if(this.$store.state.semester_label.length<=0) {\n            await this.$store.dispatch('fetchSemesterLabel')\n        }\n        this.labelOptions = this.$store.state.semester_label.data\n    },\n    methods: {\n      getLabelColor(label) {\n        const option = this.labelOptions.find(opt => opt.label === label);\n        return option ? option.color : 'defaultColor'; \n      },\n      getStyleForLabel(label) {\n        const color = this.getLabelColor(label);\n        return `background-color: ${color}44; color: ${color}; border: 1px solid ${color}`;\n      }\n    }\n  }\n  </script>\n  \n<style lang=\"sass\">\n@import \"@/style/common.sass\"\n</style>\n  ","import { render } from \"./SemesterLabelTag.vue?vue&type=template&id=595251d4\"\nimport script from \"./SemesterLabelTag.vue?vue&type=script&lang=js\"\nexport * from \"./SemesterLabelTag.vue?vue&type=script&lang=js\"\n\nimport \"./SemesterLabelTag.vue?vue&type=style&index=0&id=595251d4&lang=sass\"\n\nimport exportComponent from \"/Users/jerry/Projects/assignSystem/assignSystem/frontend/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","'use strict';\nvar $ = require('../internals/export');\nvar toObject = require('../internals/to-object');\nvar toAbsoluteIndex = require('../internals/to-absolute-index');\nvar toIntegerOrInfinity = require('../internals/to-integer-or-infinity');\nvar lengthOfArrayLike = require('../internals/length-of-array-like');\nvar doesNotExceedSafeInteger = require('../internals/does-not-exceed-safe-integer');\nvar arraySpeciesCreate = require('../internals/array-species-create');\nvar createProperty = require('../internals/create-property');\nvar deletePropertyOrThrow = require('../internals/delete-property-or-throw');\nvar arrayMethodHasSpeciesSupport = require('../internals/array-method-has-species-support');\n\nvar HAS_SPECIES_SUPPORT = arrayMethodHasSpeciesSupport('splice');\n\nvar max = Math.max;\nvar min = Math.min;\n\n// `Array.prototype.splice` method\n// https://tc39.es/ecma262/#sec-array.prototype.splice\n// with adding support of @@species\n$({ target: 'Array', proto: true, forced: !HAS_SPECIES_SUPPORT }, {\n  splice: function splice(start, deleteCount /* , ...items */) {\n    var O = toObject(this);\n    var len = lengthOfArrayLike(O);\n    var actualStart = toAbsoluteIndex(start, len);\n    var argumentsLength = arguments.length;\n    var insertCount, actualDeleteCount, A, k, from, to;\n    if (argumentsLength === 0) {\n      insertCount = actualDeleteCount = 0;\n    } else if (argumentsLength === 1) {\n      insertCount = 0;\n      actualDeleteCount = len - actualStart;\n    } else {\n      insertCount = argumentsLength - 2;\n      actualDeleteCount = min(max(toIntegerOrInfinity(deleteCount), 0), len - actualStart);\n    }\n    doesNotExceedSafeInteger(len + insertCount - actualDeleteCount);\n    A = arraySpeciesCreate(O, actualDeleteCount);\n    for (k = 0; k < actualDeleteCount; k++) {\n      from = actualStart + k;\n      if (from in O) createProperty(A, k, O[from]);\n    }\n    A.length = actualDeleteCount;\n    if (insertCount < actualDeleteCount) {\n      for (k = actualStart; k < len - actualDeleteCount; k++) {\n        from = k + actualDeleteCount;\n        to = k + insertCount;\n        if (from in O) O[to] = O[from];\n        else deletePropertyOrThrow(O, to);\n      }\n      for (k = len; k > len - actualDeleteCount + insertCount; k--) deletePropertyOrThrow(O, k - 1);\n    } else if (insertCount > actualDeleteCount) {\n      for (k = len - actualDeleteCount; k > actualStart; k--) {\n        from = k + actualDeleteCount - 1;\n        to = k + insertCount - 1;\n        if (from in O) O[to] = O[from];\n        else deletePropertyOrThrow(O, to);\n      }\n    }\n    for (k = 0; k < insertCount; k++) {\n      O[k + actualStart] = arguments[k + 2];\n    }\n    O.length = len - actualDeleteCount + insertCount;\n    return A;\n  }\n});\n","var arraySlice = require('../internals/array-slice-simple');\n\nvar floor = Math.floor;\n\nvar mergeSort = function (array, comparefn) {\n  var length = array.length;\n  var middle = floor(length / 2);\n  return length < 8 ? insertionSort(array, comparefn) : merge(\n    array,\n    mergeSort(arraySlice(array, 0, middle), comparefn),\n    mergeSort(arraySlice(array, middle), comparefn),\n    comparefn\n  );\n};\n\nvar insertionSort = function (array, comparefn) {\n  var length = array.length;\n  var i = 1;\n  var element, j;\n\n  while (i < length) {\n    j = i;\n    element = array[i];\n    while (j && comparefn(array[j - 1], element) > 0) {\n      array[j] = array[--j];\n    }\n    if (j !== i++) array[j] = element;\n  } return array;\n};\n\nvar merge = function (array, left, right, comparefn) {\n  var llength = left.length;\n  var rlength = right.length;\n  var lindex = 0;\n  var rindex = 0;\n\n  while (lindex < llength || rindex < rlength) {\n    array[lindex + rindex] = (lindex < llength && rindex < rlength)\n      ? comparefn(left[lindex], right[rindex]) <= 0 ? left[lindex++] : right[rindex++]\n      : lindex < llength ? left[lindex++] : right[rindex++];\n  } return array;\n};\n\nmodule.exports = mergeSort;\n","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../node_modules/sass-loader/lib/loader.js??ref--10-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--1-1!./SemesterLabelTag.vue?vue&type=style&index=0&id=595251d4&lang=sass\"","<template lang=\"pug\">\n.page-container\n    .page-title-container\n        .flex-half\n            .page-title 尚待派案學生列表\n            div\n                span 派案學期：\n                select.labelSelector(v-model='semesterLabel' @change='semesterLabelSelected()')\n                    option(value='') 請選擇或輸入學期標籤\n                    option(v-for='option in labelOption' :key='option.label' :value='option.label') {{ option.label }}\n            //-     span 排序方式：\n            //-     el-select(v-model=\"sortRule\" placeholder=\"請選擇排序方式\" @change=\"pushSortRule()\")\n            //-         el-option(key=\"crisis_level\" label=\"危機程度優先\" value=\"crisis_level\")\n            //-         el-option(key=\"time\" label=\"初談時間優先\" value=\"time\")\n        .flex-half(style=\"padding-left: 7px\")\n            div\n                span.page-title 初排結果\n                el-popover(placement=\"bottom\" title=\"\" :width=\"400\" trigger=\"hover\")\n                    strong 操作方式\n                    div 拖曳左側為派案個案、或是灰色實心方塊調整心理師與時段\n                    br\n                    strong 方塊顏色意義\n                    div 灰色空格：心理師此時段為有空\n                    div 灰色實心：初排將此時段配對到一個新的個案\n                    div 藍色實心：心理師此時段已有排到個案，並且諮商次數為0~6次\n                    div 紅色實心：心理師此時段已有排到個案，並且諮商次數為7~14次\n                    div 紫色實心：心理師此時段已有排到個案，並且諮商次數為15次以上\n                    template(#reference)\n                        span.timetable-info 操作說明\n                            InfoFilled(style=\"width: 1em; height: 1em; padding: 0 0 0 3px\")\n            .assign-save(style=\"padding: 17px 0\")\n                el-button(size=\"large\" type=\"warning\" @click=\"submitChange()\") 儲存修改\n    el-row(:gutter=\"10\" v-loading=\"loading\")\n        el-col(:sm=\"24\" :md=\"12\")\n            .drag-table(@drop=\"drop\" @dragover=\"allowDrop\" class=\"drag-container\" ref=\"dragBody\" id=\"dragBody\")\n                el-row.drag-header\n                    el-col.drag-header-col(v-for=\"label in headerLabel\" :span=\"label=='可諮商時段'?6:3\") {{label}}\n                        el-popover(v-if=\"label=='可諮商時段'\" placement=\"right\" title=\"\" :width=\"200\" trigger=\"hover\" popper-class=\"weektimePop\")\n                            div(v-html=\"getHtmlContent()\")\n                            template(#reference)\n                                QuestionFilled(style=\"width: 1em; height: 1em; padding: 0 0 0 3px\")\n                el-row(v-for=\"(item,idx) in unassignCases\" :draggable=\"item.status=='unassign'\" @dragstart=\"drag\" :id=\"'drag-'+item.id\" :class=\"item.status=='unassign'?'drag-body-row':'undrag-container'\")\n                    el-col.drag-body-col(v-for=\"label in headerName\" :span=\"label=='available_time'?6:3\")\n                        div(v-if=\"label=='init_consultation_date'\") {{convertUTCtoStr(item[label])}}\n                        SemesterLabelTag(v-else-if=\"label=='semester_label'\" :label=\"item[label]\")\n                        div.drag-body-wrap-item(v-else) {{item[label]}}\n        el-col(:sm=\"24\" :md=\"12\")\n            .assign-table(ref=\"assignTable\")\n                el-row.assign-header(:style=\"'width: '+tableWidth+'px'\")\n                    el-col(:span=\"3\")\n                        .slopeline\n                            .slope-label.slope-label-1 姓名\n                            .slope-label.slope-label-2 時段\n                    el-col.assign-col-container(:span=\"21\")\n                        .row-bar.assign-header-label(:span=\"2\" v-for=\"i in times\") {{i.label.split('~')[0]}}\n                el-row.assign-body\n                    template(v-for=\"(day,tIdx) in dayList\")\n                        el-col(:span=\"24\").assign-date {{getDatetime(day.offset)}}\n                            el-tag(v-if=\"timetable[day.offset].isHoliday\" type=\"danger\" size=\"mini\" class=\"mx-1\" effect=\"dark\" round) 假日\n                        template(v-for=\"(row,rowIdx) in timetable[day.offset].rows\")\n                            template(v-if=\"!timetable[day.offset].isHoliday\")\n                                el-col.assign-aside-label.col-bar(:span=\"3\")\n                                    div {{row.counselor_name}}\n                                el-col.assign-col-container.col-bar(:span=\"21\")\n                                    .row-bar.unavailable(:span=\"2\" v-for=\"i in times\")\n                                        timeBlock.drag-container(v-if=\"row.block[i.value]\" :block='row.block[i.value]' \n                                            :pos=\"day.offset+'-'+rowIdx+'-'+i.value\"\n                                            @addTimeblock=\"addTimeblock($event,day.offset,rowIdx,i.value)\" \n                                            @removeTimeblock=\"removeTimeblock\"\n                                            @setDragPos=\"setDragPos\"\n                                            @endCase=\"endCase($event,data)\"\n                                            @returnCase=\"returnCase($event,data)\")\n    el-dialog(title=\"儲存成功\" v-model=\"dialogVisible\" width=\"60%\" @close=\"handleClose\" center)\n        el-row\n            el-col(:span=\"12\")\n                h3 本次新增派案\n            el-col(:span=\"12\")\n                download-excel(:data='downloadXLS()' :fields=\"json_fields\" :name='getDateStr(0)+\"新增派案.xls\"')\n                    el-button(type=\"success\" size=\"medium\" style=\"float: right;margin-right: 40px;\" ) 下載Excel\n                el-button(type=\"success\" size=\"medium\" style=\"float: right;margin-right: 40px;\" @click=\"downloadCSV()\") 下載CSV\n        el-table(:data=\"assigningCases\" style=\"width: 100%\")\n            el-table-column(prop=\"name\" label=\"姓名\")\n            el-table-column(prop=\"caseId\" label=\"學號\")\n            el-table-column(prop=\"semester_label\" label=\"學期標籤\")\n            el-table-column(label=\"諮商時段\")\n                template(#header='')\n                    el-popover(placement=\"right\" title=\"\" :width=\"200\" trigger=\"hover\" popper-class=\"weektimePop\")\n                        div(v-html=\"getHtmlContent()\")\n                        template(#reference)\n                            span 諮商時段\n                                QuestionFilled(style=\"width: 1em; height: 1em; padding: 0 0 0 3px\")\n                template(#default='scope')\n                    div {{scope.row.consultation_day + scope.row.consultation_time}}\n            el-table-column(prop=\"counselor_name\" label=\"派案老師\")\n            el-table-column(prop=\"first_consultation_date\" label=\"諮商開始時間\")\n            el-table-column(prop=\"crisis_level\" label=\"危機程度\")\n            el-table-column(prop=\"init_counselor_name\" label=\"初談老師\")\n            el-table-column(prop=\"discription\" label=\"狀態說明\")\n            el-table-column(prop=\"init_consultation_date\" label=\"初談時間\")\n                template(#default='scope')\n                    div {{convertUTCtoStr(scope.row.init_consultation_date)}}\n        .dialog-footer(slot=\"footer\" style=\"text-align: center\")\n            el-button(type=\"danger\" @click=\"dialogVisible = false\") 關閉\n</template>\n\n<script>\nimport timeBlock from '@/views/assign/assigningBlock'\nimport {weektimeMixin} from \"@/components/weektimeMixin\"\nimport SemesterLabelTag from '@/components/SemesterLabelTag.vue';\nimport _ from \"lodash\"\nexport default {\n    mixins: [weektimeMixin],\n    components: {timeBlock, SemesterLabelTag},\n    inject: [\"reload\"],\n    data () {\n        return {\n            dialogVisible: false,\n            headerLabel: [\"學號\",\"姓名\",\"學期標籤\",\"可諮商時段\",\"危機程度\",\"狀態說明\",\"初談時間\"],\n            headerName: [\"caseId\",\"name\",\"semester_label\",\"available_time\",\"crisis_level\",\"discription\",\"init_consultation_date\"],\n            // assigningCases: [],\n            assignCases: [],\n            unassignCases: [],\n            timetable: {},\n            tableWidth: 0,\n            dragPos: '',\n            dayList: [],\n            emptyTimeList: [],\n            finalTimeInfo: [],\n            loading: true,\n            json_fields: {\n                \"姓名\": \"name\",\n                \"學號\": \"caseId\" ,\n                \"學期標籤\": \"semester_label\",\n                \"諮商時段\": \"consultation_datetime\",\n                \"派案老師\": \"counselor_name\",\n                \"諮商開始時間\": \"first_consultation_date\",\n                \"危機程度\": \"crisis_level\",\n                \"初談老師\": \"init_counselor_name\",\n                \"狀態說明\": \"discription\",\n                \"初談時間\": \"init_consultation_date\"\n            },\n            semesterLabel: '',\n            labelOption: '',\n            sortRule: \"sortRule\",\n            sortScore: {\n                crisis_level: {\n                    labelNumber: {\n                        A: 1000,\n                        B: 100,\n                        C: 0\n                    },\n                    levelNumber: {\n                        '+': 0,\n                        '-': 0\n                    }\n                },\n                time: {\n                    labelNumber: {\n                        A: 0,\n                        B: 0,\n                        C: 0\n                    },\n                    levelNumber: {\n                        '+': 0,\n                        '-': 0\n                    }\n                }\n            }\n        }\n    },\n    async created() {\n        await this.$store.dispatch('fetchHoliday')\n        await this.$store.dispatch('fetchSemesterLabel')\n        this.labelOption = this.$store.state.semester_label.data\n        this.sortRule = this.$route.query.sort_rule ? this.$route.query.sort_rule : \"crisis_level\"\n        this.semesterLabel = this.$route.query.semesterLabel ? this.$route.query.semesterLabel : this.labelOption[0].label\n        await this.$store.dispatch('fetchAssignCases')\n        await this.$store.dispatch('fetchCounselors')\n        await this.$store.dispatch('fetchUnassignCases')\n        this.timetable = this.createTimeTable()\n        console.log(this.timetable)\n    },\n    computed: {\n        assigningCases: function(){\n            return this.unassignCases.filter(cases => cases.status==\"assigning\")\n        },\n        counselors() {\n            console.log(this.semesterLabel)\n            if (this.semesterLabel !== '')\n                return this.$store.state.counselors.filter(counselor => counselor.semester_label === this.semesterLabel)\n            else\n                return this.$store.state.counselors\n        }\n    },\n    mounted() {\n        var parentwidth = this.$refs.assignTable.clientWidth\n        this.tableWidth = parentwidth\n    },\n    methods: {\n        semesterLabelSelected() {\n            this.$router.push({ path: '', query: { semesterLabel: this.semesterLabel } })\n            this.reload()\n        },\n        pushSortRule() {\n            this.$router.push({ path: '', query: { sort_rule: this.sortRule } })\n            this.reload()\n        },\n        sortCases(cases) {\n            // 算today~create_date並加入score\n            const endDate = new Date()\n            const msInDay = 1000 * 60 * 60 * 24\n            this.sortRule = this.$route.query.sort_rule ? this.$route.query.sort_rule : \"crisis_level\"\n\n            var labelNumber = this.sortScore[this.sortRule][\"labelNumber\"]\n            var levelNumber = this.sortScore[this.sortRule][\"levelNumber\"]\n\n            cases.forEach(element => {\n                let count = 0\n                \n                for (let l in labelNumber){\n                    if(element.crisis_level.indexOf(l)>=0) count+=labelNumber[l]\n                }\n                for (let l in levelNumber){\n                    if(element.crisis_level.indexOf(l)>=0) count+=levelNumber[l]\n                }\n                element.score = count\n                let startDate = new Date(element.init_consultation_date)\n                let dis = Math.ceil(Math.abs(endDate - startDate) / msInDay);\n                element.score+=dis\n            });\n            cases.sort(function (a, b) {\n                if (a.score > b.score) {\n                    return -1;\n                }\n                if (a.score < b.score) {\n                    return 1;\n                }\n                return 0;\n            });\n        },\n        createTimeTable() {\n            this.unassignCases = _.cloneDeep(this.$store.state.unassignCases)\n            this.unassignCases = this.unassignCases.filter((item) =>\n                item.semester_label === this.semesterLabel\n            )\n\n            this.sortCases(this.unassignCases)\n\n            this.assignCases = _.cloneDeep(this.$store.state.assignCases.data)\n\n            let timetable = {}\n                // set week days\n            for(let offset=8 ; offset>=0 ; offset--) {\n                var weekdays = [\"U\",\"M\",\"T\",\"W\",\"R\",\"F\",\"S\"]\n                var today = new Date()\n                today.setDate(today.getDate() + offset)\n                const offset_date = weekdays[today.getDay()]\n                if (offset_date != \"U\" && offset_date!= \"S\") {\n                    let isHoliday = this.checkHoliday(today)\n                    // add dayList\n                    this.dayList.push({name: offset_date,offset: offset})\n                    var rowAry = {}\n                    // set counselors\n                    this.counselors.forEach(counselor => {  // get counselors in the day\n                        if(counselor.available_time.indexOf(offset_date) >= 0 ){\n                            let timeAry = counselor.available_time.split(\",\")\n                            let blockObj = {}\n                            for(let t=0 ; t < timeAry.length ; t++){     // get time in the day\n                                if( timeAry[t].indexOf(offset_date) >= 0 ) {\n                                    let the_time = timeAry[t].substr(timeAry[t].length - 1)\n                                    blockObj[the_time] = 'unassign'\n                                    if(!isHoliday)\n                                        this.emptyTimeList.unshift(`${offset_date}${the_time}-${offset}-${counselor.name}`)\n                                }\n                            }\n                            rowAry[counselor.name] = {\n                                counselor_name: counselor.name,\n                                block: blockObj\n                            }\n                        }\n                    })\n                    timetable[offset] = {\n                        offset: offset,\n                        rows: rowAry,\n                        isHoliday: isHoliday ? true : false\n                    }\n                }\n            }\n            // set assigned cases\n            if(this.assignCases) {\n                this.assignCases.forEach(item => {\n                    let fitDay = this.dayList.filter( d => d.name == item.consultation_day)\n                    fitDay.forEach( day => {\n                        if(!timetable[day.offset].rows[item.counselor_name])\n                            timetable[day.offset].rows[item.counselor_name]= {block : {}}\n                        // check end day & start day\n                        if(this.checkRangeDay(day.offset,item.end_consultation_date,item.first_consultation_date,item.status)) {\n                            let _item = _.cloneDeep(item)\n                            timetable[day.offset].rows[item.counselor_name].block[item.consultation_time] = _item\n                            timetable[day.offset].rows[item.counselor_name].block[item.consultation_time].consultation_number = this.countConsultationNumber(this.getDateStr(day.offset), _item.first_consultation_date)\n                            this.emptyTimeList = this.removeEmptyTimeList(this.emptyTimeList,day.name,_item.consultation_time,day.offset,_item.counselor_name)\n                        }\n                        else if (this.checkReserve(day.offset,item.first_consultation_date)) {\n                            let _item = _.cloneDeep(item)\n                            timetable[day.offset].rows[item.counselor_name].block[item.consultation_time] = _item\n                            timetable[day.offset].rows[item.counselor_name].block[item.consultation_time].consultation_number = 0\n                            timetable[day.offset].rows[item.counselor_name].block[item.consultation_time].status= \"reserve\"\n                            this.emptyTimeList = this.removeEmptyTimeList(this.emptyTimeList,day.name,_item.consultation_time,day.offset,_item.counselor_name)\n                        }\n                    })\n                })\n            }\n            this.emptyTimeList = this.clearRepeatTime( _.cloneDeep(this.emptyTimeList))\n            // assigning cases\n            // get assign method\n            if(this.unassignCases.length>0) {\n                let root_node = {\n                    timeInfo: '',\n                    fit_time: this.fitEmptyTimeList(this.unassignCases[0].available_time,this.emptyTimeList),\n                    remain_time: this.emptyTimeList\n                }\n                this.makeTree(root_node,0)\n                let infoIdx = 0\n                // arrange the meeting\n                while(this.finalTimeInfo.length>0) {\n                    if(this.finalTimeInfo[0] == 'unassign' || this.finalTimeInfo[0]=='undefined') {\n                        this.finalTimeInfo.shift()\n                    }\n                    else {\n                        let assingDay = this.finalTimeInfo[0].charAt(0)\n                        let assignTime = this.finalTimeInfo[0].charAt(1)\n                        let dayOffset = this.finalTimeInfo[0].split('-')[1]\n                        let counselor_name = this.finalTimeInfo[0].split('-')[2]\n\n                        this.unassignCases[infoIdx].status = \"assigning\"\n                        this.unassignCases[infoIdx].consultation_day = assingDay\n                        this.unassignCases[infoIdx].consultation_time = assignTime\n                        this.unassignCases[infoIdx].counselor_name = counselor_name\n                        this.unassignCases[infoIdx].counselor_id = this.counselors.filter(item => item.name==counselor_name)[0].id\n                        this.unassignCases[infoIdx].first_consultation_date = this.getDateStr(dayOffset)\n                        this.unassignCases[infoIdx].consultation_number = 0\n                        timetable[dayOffset].rows[counselor_name].block[assignTime] = _.cloneDeep(this.unassignCases[infoIdx])\n                        if (dayOffset < 2) {\n                            let nextOffset = parseInt(dayOffset)+7\n                            timetable[nextOffset].rows[counselor_name].block[assignTime] = _.cloneDeep(this.unassignCases[infoIdx])\n                            timetable[nextOffset].rows[counselor_name].block[assignTime].consultation_number = 1\n                            timetable[nextOffset].rows[counselor_name].block[assignTime].isLater = true\n                        }\n                        this.finalTimeInfo.shift()\n                    }\n                    infoIdx+=1\n                }\n            }\n            \n            setTimeout(() => {\n                this.loading = false\n            }, \"1000\")\n            return timetable\n        },\n        makeTree(nodes,caseIdx) {\n            if(this.unassignCases[caseIdx+1]) {\n                if (nodes.fit_time.length>0) {\n                    let maxFit = 0\n                    nodes.fit_time.forEach(timeInfo => {\n                        let _fit_time = this.fitEmptyTimeList(this.unassignCases[caseIdx+1].available_time,this.removeEmptyTimeList(nodes.remain_time,0,0,0,0,timeInfo))\n                        if (_fit_time.length>maxFit) {\n                            maxFit = _fit_time.length\n                            let node = {\n                                timeInfo : nodes.timeInfo+timeInfo+',',\n                                remain_time: this.removeEmptyTimeList(nodes.remain_time,0,0,0,0,timeInfo),\n                                fit_time: _fit_time,\n                            }\n                            this.makeTree(node,caseIdx+1)\n                        }\n                    })\n                    if(maxFit == 0) {\n                        // console.log(nodes,caseIdx)\n                        let timeInfo = nodes.fit_time[0]\n                        let node = {\n                            timeInfo : nodes.timeInfo+timeInfo+',',\n                            remain_time: this.removeEmptyTimeList(nodes.remain_time,0,0,0,0,timeInfo),\n                            fit_time: this.fitEmptyTimeList(this.unassignCases[caseIdx+1].available_time,this.removeEmptyTimeList(nodes.remain_time,0,0,0,0,timeInfo)),\n                        }\n                        this.makeTree(node,caseIdx+1)\n                    }\n                }\n                else {\n                    let node = {\n                        timeInfo : nodes.timeInfo+'unassign'+',',\n                        remain_time: nodes.remain_time,\n                        fit_time: this.fitEmptyTimeList(this.unassignCases[caseIdx+1].available_time,nodes.remain_time),\n                    }\n                    this.makeTree(node,caseIdx+1)\n                }\n            }\n            else {\n                let finalTimeInfo = nodes.timeInfo+nodes.fit_time[0]\n                this.finalTimeInfo = finalTimeInfo.split(',')\n            }\n        },\n        fitEmptyTimeList(available_time,remain_time) {\n            return remain_time.filter(timeInfo => available_time.indexOf(timeInfo.split('-')[0])>=0)\n        },\n        clearRepeatTime(list) {\n            list.forEach(item => {\n                let labels = item.split(\"-\")\n                labels[1] = parseInt(labels[1]) + 7\n                let idx = list.indexOf(labels.join('-'))\n                if(idx>=0) {\n                    list.splice(idx,1)\n                }\n            })\n            return list\n        },\n        removeEmptyTimeList(_ary,day,time,offset,name,timeInfo = null) {\n            let ary = []\n            let i = -1\n            while (++i < _ary.length) {\n                ary[i] = _ary[i];\n            }\n            var index;\n            if(!timeInfo)\n                index = ary.indexOf(`${day}${time}-${offset}-${name}`)\n            else{\n                index = ary.indexOf(timeInfo)\n            }\n            if (index > -1) {\n                ary.splice(index, 1)\n            }\n            return Object.values(ary)\n        },\n        getDateStr(offset){\n            var today = new Date()\n            today.setDate(today.getDate() + parseInt(offset))\n            return today.getFullYear()+'-'+(today.getMonth()+1)+'-'+today.getDate()\n        },\n        // frontend control\n        getDatetime(offset){\n            var weekdays = [\"（日）\",\"（ㄧ）\",\"（二）\",\"（三）\",\"（四）\",\"（五）\",\"（六）\"]\n            var today = new Date()\n            today.setDate(today.getDate() + parseInt(offset))\n            var date = today.getFullYear()+' / '+(today.getMonth()+1)+' / '+today.getDate()+'  '+weekdays[today.getDay()]\n            return date\n        },\n        allowDrop(ev) {\n            ev.preventDefault()\n        },\n        drag(ev) {\n            ev.dataTransfer.setData(\"text\", ev.target.id)\n        },\n        drop(ev) {\n            ev.preventDefault()\n            var data = ev.dataTransfer.getData(\"text\")\n            if(ev.target.classList.contains(\"unassign-block\")) {\n                ev.target.appendChild(document.getElementById(data))\n            }\n            else{\n                this.removeTimeblock({id: data.split('-')[1], dis: 'table'})\n            }\n            // else{\n            //     this.$refs.dragBody.appendChild(document.getElementById(data))\n            // }\n        },\n        setDragPos(val) {\n            this.dragPos = val\n        },\n        removeTimeblock({ id, dis}) {\n            if(dis == 'table') {\n                Object.keys(this.timetable).forEach(offset => {\n                    Object.keys(this.timetable[offset].rows).forEach(row => {\n                        Object.keys(this.timetable[offset].rows[row].block).forEach(counselor => {\n                            if (this.timetable[offset].rows[row].block[counselor].id==id){\n                                this.changeCaseStatus(id,'unassign')\n                                this.timetable[offset].rows[row].block[counselor] = 'unassign'\n                            }\n                        })\n                    })\n                })\n            }\n            else if(this.dragPos!=''){\n                var pos = this.dragPos.split('-')\n                if(this.timetable[parseInt(pos[0])+7]) {\n                    this.timetable[parseInt(pos[0])+7].rows[pos[1]].block[pos[2]] = 'unassign'\n                }\n                this.timetable[pos[0]].rows[pos[1]].block[pos[2]] = 'unassign'\n            }\n        },\n        addTimeblock(id,tIdx,row,col) {\n            var day = this.dayList.find(e => e.offset == tIdx)\n            for(let i=0;i<this.unassignCases.length;i++){\n                if(this.unassignCases[i].id == id){\n                    this.timetable[tIdx].rows[row].block[col] = this.unassignCases[i]\n                    this.unassignCases[i].status = \"assigning\"\n                    this.unassignCases[i].counselor_name = row\n                    this.unassignCases[i].counselor_id = this.counselors.filter(item => item.name==row)[0].id\n                    this.unassignCases[i].consultation_day = day.name\n                    this.unassignCases[i].consultation_time = col\n                    this.unassignCases[i].first_consultation_date = this.getDateStr(tIdx)\n                    if(this.timetable[tIdx+7]) {\n                        if(this.timetable[tIdx+7].rows[row].block[col]!=\"unassign\") {\n                            this.changeCaseStatus(this.timetable[tIdx+7].rows[row].block[col].id,\"unassign\")\n                        }\n                        this.timetable[tIdx+7].rows[row].block[col] = _.cloneDeep(this.unassignCases[i])\n                        this.timetable[tIdx+7].rows[row].block[col].consultation_number = 1\n                        this.timetable[tIdx+7].rows[row].block[col].isLater = true\n                    }\n                    return\n                }\n            }\n        },\n        changeCaseStatus(id,status) {\n            let unassignCase = this.unassignCases.find(e => e.id == id)\n            if(unassignCase) {\n                unassignCase.status = status\n                console.log(this.unassignCases)\n            }\n        },\n        putCase(id,body) {\n            let data = {}\n            if(body.status == \"closed\"){\n                data = {\n                    status: body.status,\n                    end_consultation_date: body.end_consultation_date \n                }\n            }\n            else if(body.status == \"unassign\"){\n                data = {\n                    status: body.status\n                }\n            }\n            else {\n                data = {\n                    status: body.status,\n                    consultation_day: body.consultation_day,\n                    consultation_time: body.consultation_time,\n                    counselor_id: body.counselor_id,\n                    counselor_name: body.counselor_name,\n                    first_consultation_date: body.first_consultation_date\n                }\n            }\n                \n            this.$http.put(\"/api/cases/\"+id,data)\n            .then(response => {\n                console.log(response.data.message)\n                // this.$store.dispatch('fetchAssignCases')\n            })\n            .catch((error) => {\n                console.log(error)\n            });\n        },\n        submitChange() {\n            let assigningCases = _.cloneDeep(this.assigningCases)\n            for(let i=0;i<this.assigningCases.length;i++) {\n                assigningCases[i].status = \"assign\"\n                this.putCase(assigningCases[i].id,assigningCases[i])\n            }\n            this.dialogVisible = true\n        },\n        downloadXLS() {\n            let cases = _.cloneDeep(this.assigningCases)\n            return this.convertCases(cases)\n        },\n        downloadCSV() {\n            const cases = _.cloneDeep(this.assigningCases);\n            const formattedCases = this.convertCases(cases)\n            const csvContent = this.buildCSVContent(formattedCases)\n            const encodedUri = encodeURI(csvContent)\n            window.open(encodedUri)\n        },\n        formatConsultationDateTime(caseItem) {\n            const dayLabel = this.days.find(e => e.value == caseItem.consultation_day).label;\n            const timeLabel = this.times.find(e => e.value == caseItem.consultation_time).label;\n            return '星期' + dayLabel + ' ' + timeLabel;\n        },\n        convertCases(cases) {\n            return cases.map(caseItem => ({\n                ...caseItem,\n                consultation_datetime: this.formatConsultationDateTime(caseItem),\n                init_consultation_date: this.convertUTCtoStr(caseItem.init_consultation_date)\n            }));\n        },\n        buildRow(caseItem) {\n            return Object.keys(this.json_fields).map(label => caseItem[this.json_fields[label]]);\n        },\n\n        buildCSVContent(cases) {\n            const rows = [Object.keys(this.json_fields)];\n            cases.forEach(caseItem => {\n                rows.push(this.buildRow(caseItem));\n            });\n            return \"data:text/csv;charset=utf-8,\" + rows.map(row => row.join(\",\")).join(\"\\r\\n\");\n        },\n        handleClose() {\n            // change timetable result\n            let assigningCases = _.cloneDeep(this.assigningCases)\n            for(let i=0;i<assigningCases.length;i++) {\n                Object.keys(this.timetable).forEach(offset => {\n                    Object.keys(this.timetable[offset].rows).forEach(row => {\n                        Object.keys(this.timetable[offset].rows[row].block).forEach(counselor => {\n                            if (this.timetable[offset].rows[row].block[counselor].id==assigningCases[i].id){\n                                this.timetable[offset].rows[row].block[counselor].status = 'assign'\n                                this.timetable[offset].rows[row].block[counselor].consultation_number = 1\n                            }\n                        })\n                    })\n                })\n            }\n            this.unassignCases = this.unassignCases.filter(e => e.status == 'unassign')\n        },\n        endCase(data) {\n            let endCase = data\n            endCase.status = \"closed\"\n            endCase.end_consultation_date = this.getDateStr(endCase.offset)\n            this.putCase(endCase.id,endCase)\n            this.removeTimeblock({id: data.id})\n        },\n        returnCase(data) {\n            let returnCase = data\n            returnCase.status = \"unassign\"\n            returnCase.consultation_number = 0\n            this.putCase(returnCase.id,returnCase)\n            this.removeTimeblock({id: data.id, dis: 'table'})\n            this.unassignCases.push(data)\n        },\n        getLabelColor(label) {\n            const option = this.labelOption.find(opt => opt.label === label)\n            return option ? option.color : '#409EFF'\n        },\n        getStyleForLabel(label) {\n            const color = this.getLabelColor(label)\n            return `background-color: ${color}44; color: ${color}; border: 1px solid ${color}`\n        }\n    }\n}\n</script>\n<style lang=\"sass\" scoped>\n@import \"@/style/common.sass\"\n.page-title-container\n    display: flex\n    .flex-half\n        width: 50%\n        display: grid\n        grid-template-columns: auto auto\n        grid-gap: 10px\n        align-items: center\n        .timetable-info\n            padding: 0 0 10px 20px\n            font-weight: bolder\n            cursor: pointer\n            color: $RegularText\n        .assign-save\n            justify-self: end\n        .page-title\n            margin-bottom: 10px\n.drag-table\n    @include tableBorder()\n    z-index: 999\n    height: 75vh\n    padding: 10px\n.drag-header\n    border-bottom: 2px solid $BaseBorder\n    padding: 10px\n.drag-container\n    z-index: 999\n.drag-body-row\n    border-bottom: 1px solid $LightBorder\n    padding: 15px 10px\n    transition: 0.8s\n    border-radius: 4px\n    &:hover\n        background-color: $BaseFill\n        cursor: pointer\n        box-shadow: 0px 16px 48px 16px rgba(0, 0, 0, .08), 0px 12px 32px rgba(0, 0, 0, .12), 0px 8px 16px -8px rgba(0, 0, 0, .16)\n.drag-body-wrap-item\n    word-wrap: break-word\n    text-wrap: balance\n.undrag-container\n    border-bottom: 1px solid $LightBorder\n    padding: 15px 10px\n    background-color: $GrayBorder\n.drag-header-col\n    @include lableText()\n.drag-body-col\n    @include lableText()\n    color: $SecondaryText\n.assign-table\n    @include tableBorder()\n    height: 75vh\n    padding-bottom: 20px\n.assign-header\n    border-bottom: 2px solid $BaseBorder\n    position: fixed\n    z-index: 1\n    background-color: $BaseBackground\n    border-radius: 6px 6px 0 0\n.assign-body\n    margin-top: 50px\n.assign-col-container\n    display: flex\n    flex-wrap: nowrap\n.assign-header-label\n    @include lableText()\n    text-align: center\n    padding: 15px 5px 15px 5px\n.row-bar\n    border-left: 1px solid $LightBorder\n    width: calc( 100% / 9 )\n.assign-date\n    @include lableText()\n    text-align: center\n    background-color: $RegularText\n    color: $BaseBackground\n.assign-aside-label\n    @include lableText()\n    text-align: center\n    padding: 15px 5px\n.col-bar\n    border-bottom: 1px solid $LightBorder\n.unavailable\n    // cursor: not-allowed\n    background-color: $BaseFill\n// timetable label\n.slopeline\n    position: relative\n    width: 100%\n    border-top: 1px solid $BaseBorder\n    transform: rotateZ(26deg) translate(10px, 21px)\n.slope-label\n    position: absolute\n    font-size: 14px\n    color: $RegularText\n    transform: rotateZ(-26deg)\n    font-weight: bold\n.slope-label-1\n    top: 5px\n    left: 20px\n.slope-label-2\n    top: -27px\n    left: 37px\n\n.dialog-footer\n    margin-top: 20px\n</style>\n","<template lang=\"pug\">\ndiv\n    .block-container(v-if=\"block == 'unassign'\" ref=\"blockContainer\" class=\"unassign\")\n        .unassign-block.droggable-block(@drop=\"drop\" @dragover=\"allowDrop\") 未指派\n    div(v-else-if=\"block.status=='assigning'\")\n        el-popover(:placement='block.consultation_time>=7?\"left\":\"right\"' :title='block.name' :width='200' trigger='click' :hide-after='0' :disabled='block == \"unassign\"?true:false')\n            div(v-html='formatContent()')\n            template(#reference='')\n                .block-container.draggable-block.assign-block(:class=\"getColor()\" @click=\"block.isLater?clikeLaterBlock():''\")\n                    div(:draggable=\"!block.isLater?true:false\" @dragstart=\"drag\" :id=\"'drag-'+block.id\") {{block.name}} <br> （{{block.consultation_number}}）\n    .block-container(v-else :class=\"getColor()\")\n        el-popover(:placement='block.consultation_time>=7?\"left\":\"right\"' :title='block.name' :width='200' trigger='click' :hide-after='0' :disabled='block == \"unassign\"?true:false')\n            div(v-html='formatContent()')\n            div(style=\"display: flex;justify-content: center;\")\n                el-button(type=\"warning\" size=\"small\" style=\"margin: 5px 10px\" @click=\"this.$emit('returnCase',block)\") 取消派案\n                el-button(type=\"danger\" size=\"small\" style=\"margin: 5px 10px\" @click=\"clickEnd()\" :disabled=\"block.status=='closed'\") {{block.status=='closed'?'已結案':'結案'}}\n            template(#reference='')\n                .assign-block {{block.name}} <br> （{{block.consultation_number}}）\n</template>\n\n<script>\nexport default {\n    props: ['block','pos'],\n    data () {\n        return {\n        }\n    },\n    // watch: { \n    //     block: function(newVal, oldVal) { // watch it\n    //         console.log('Prop changed: ', newVal, ' | was: ', oldVal)\n    //     }\n    // },\n    methods: {\n        getColor() {\n            if(this.block.status == \"closed\") {\n                return 'black-block'\n            }\n            else if(this.block.status == \"reserve\") {\n                return 'aliceblue-block'\n            }\n            else {\n                if(this.block.status == \"assign\") {\n                    if(this.block.consultation_number >= 15) {\n                            return 'purple-block'\n                    }\n                    else if(this.block.consultation_number >= 7) {\n                        return 'red-block'\n                    }\n                    else if(this.block.consultation_number >= 1) {\n                        return 'blue-block'\n                    }\n                }\n                else {\n                    if ( this.block.isLater ) {\n                        return 'darker-gray-block'\n                    }\n                    else {\n                        return 'gray-block'\n                    }\n                }\n            }\n        },\n        formatContent() {\n            return `\n            學號：${this.block.caseId} <br>\n            初談時間：${this.getDateStr(this.block.init_consultation_date)}<br>\n            危機程度：${this.block.crisis_level} <br>\n            狀況說明：${this.block.discription} <br>\n            學期標籤：${this.block.semester_label} <br>\n            諮商時段：${this.block.consultation_day+this.block.consultation_time} <br>\n            派案老師：${this.block.counselor_name} <br>\n            諮商次數：${this.block.consultation_number}<br>\n            開始諮商：${this.getDateStr(this.block.first_consultation_date)}<br>\n            ${this.block.status == \"closed\"?'結束諮商：'+this.getDateStr(this.block.end_consultation_date):''}\n            `\n        },\n        allowDrop(ev) {\n            ev.preventDefault()\n        },\n        drag(ev) {\n            ev.dataTransfer.setData(\"text\", ev.target.id)\n            this.$emit('setDragPos',this.pos)\n        },\n        drop(ev) {\n            ev.preventDefault()\n            var data = ev.dataTransfer.getData(\"text\")\n            if(ev.target.classList.contains(\"drag-container\")) {\n                ev.target.appendChild(document.getElementById(data))\n            }\n            else if(ev.target.classList.contains(\"unassign-block\")) {\n                // ev.target.appendChild(document.getElementById(data))\n                this.$emit('removeTimeblock',{id: data.split('-')[1]})\n                this.$emit('addTimeblock',data.split('-')[1])\n            }\n            else{\n                document.querySelector(\"#dragBody\").appendChild(document.getElementById(data))\n            }\n        },\n        getDateStr(datestring){\n            var today = new Date(datestring)\n            return today.getFullYear()+'-'+(today.getMonth()+1)+'-'+today.getDate()\n        },\n        clikeLaterBlock() {\n            this.$message({\n                showClose: true,\n                message: '請移動一週前此時段的區塊來調整時間',\n                duration: 5000\n            });\n        },\n        clickEnd() {\n            let block = this.block\n            block.offset = parseInt(this.pos.split('-')[0])\n            this.$emit('endCase', block)\n        }\n    }\n}\n</script>\n<style lang=\"sass\" scoped>\n@import \"@/style/common.sass\"\n.block-container\n    width: calc( 100% - 4px )\n    height: calc( 100% - 4px )\n    border-radius: 4px\n    cursor: pointer\n\n.unassign\n    border: 2px solid #909399\n    background-color: #FFF\n.unassign-block\n    color: $SecondaryText\n    font-size: 0.9em\n    font-weight: bold\n    text-align: center\n    padding: 15px 0\n.assign-block\n    color: $BaseBackground\n    font-size: 0.9em\n    font-weight: bold\n    text-align: center\n    padding: 5px 0\n.draggable-block\n    transition: 0.8s\n    &:hover\n        opacity: 0.9\n        box-shadow: 0px 16px 48px 16px rgba(0, 0, 0, .08), 0px 12px 32px rgba(0, 0, 0, .12), 0px 8px 16px -8px rgba(0, 0, 0, .16)\n</style>\n    ","import { render } from \"./assigningBlock.vue?vue&type=template&id=fb8ff7f0&scoped=true&lang=pug\"\nimport script from \"./assigningBlock.vue?vue&type=script&lang=js\"\nexport * from \"./assigningBlock.vue?vue&type=script&lang=js\"\n\nimport \"./assigningBlock.vue?vue&type=style&index=0&id=fb8ff7f0&lang=sass&scoped=true\"\n\nimport exportComponent from \"/Users/jerry/Projects/assignSystem/assignSystem/frontend/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-fb8ff7f0\"]])\n\nexport default __exports__","import { render } from \"./assigning.vue?vue&type=template&id=c1db902e&scoped=true&lang=pug\"\nimport script from \"./assigning.vue?vue&type=script&lang=js\"\nexport * from \"./assigning.vue?vue&type=script&lang=js\"\n\nimport \"./assigning.vue?vue&type=style&index=0&id=c1db902e&lang=sass&scoped=true\"\n\nimport exportComponent from \"/Users/jerry/Projects/assignSystem/assignSystem/frontend/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-c1db902e\"]])\n\nexport default __exports__","var UA = require('../internals/engine-user-agent');\n\nmodule.exports = /MSIE|Trident/.test(UA);\n","var $ = require('../internals/export');\nvar DESCRIPTORS = require('../internals/descriptors');\nvar ownKeys = require('../internals/own-keys');\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar getOwnPropertyDescriptorModule = require('../internals/object-get-own-property-descriptor');\nvar createProperty = require('../internals/create-property');\n\n// `Object.getOwnPropertyDescriptors` method\n// https://tc39.es/ecma262/#sec-object.getownpropertydescriptors\n$({ target: 'Object', stat: true, sham: !DESCRIPTORS }, {\n  getOwnPropertyDescriptors: function getOwnPropertyDescriptors(object) {\n    var O = toIndexedObject(object);\n    var getOwnPropertyDescriptor = getOwnPropertyDescriptorModule.f;\n    var keys = ownKeys(O);\n    var result = {};\n    var index = 0;\n    var key, descriptor;\n    while (keys.length > index) {\n      descriptor = getOwnPropertyDescriptor(O, key = keys[index++]);\n      if (descriptor !== undefined) createProperty(result, key, descriptor);\n    }\n    return result;\n  }\n});\n","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/sass-loader/lib/loader.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--1-1!./assigningBlock.vue?vue&type=style&index=0&id=fb8ff7f0&lang=sass&scoped=true\"","var $ = require('../internals/export');\nvar fails = require('../internals/fails');\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar nativeGetOwnPropertyDescriptor = require('../internals/object-get-own-property-descriptor').f;\nvar DESCRIPTORS = require('../internals/descriptors');\n\nvar FAILS_ON_PRIMITIVES = fails(function () { nativeGetOwnPropertyDescriptor(1); });\nvar FORCED = !DESCRIPTORS || FAILS_ON_PRIMITIVES;\n\n// `Object.getOwnPropertyDescriptor` method\n// https://tc39.es/ecma262/#sec-object.getownpropertydescriptor\n$({ target: 'Object', stat: true, forced: FORCED, sham: !DESCRIPTORS }, {\n  getOwnPropertyDescriptor: function getOwnPropertyDescriptor(it, key) {\n    return nativeGetOwnPropertyDescriptor(toIndexedObject(it), key);\n  }\n});\n"],"sourceRoot":""}